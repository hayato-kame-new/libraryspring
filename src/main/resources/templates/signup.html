<!DOCTYPE html>
<html xmlns:th="http://thymeleaf.org">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link th:href="@{/css/style.css}" rel="stylesheet"/>
<title th:text="|#{signup_page.title} - library|"></title>
</head>
<body>

	<h2 class="heading">ユーザー登録</h2>
	<div>
	    <form method="post" th:action="@{/signup}" th:object="${signupForm}">
	        <div th:if="${signupError}">
	            <div th:text="${signupError}"></div>
	        </div>
	        
	        <label for="username">ユーザー名</label>
	        <input type="text" id="username" name="username" th:value="${signupForm.username}" th:errorclass="err"><br>
	        <!-- バリデーションエラーの表示 
	        <div th:if="${#fields.hasErrors('フィールド名')}" th:errors="${signupForm.フィールド名}"></div>
	        もしくは
	        <div th:errors="*{username}"></div>  このように書いても大丈夫
	        -->
	        <div th:if="${#fields.hasErrors('username')}" th:errors="${signupForm.username}" th:errorclass="err"></div>
	        
	        <label for="password">パスワード</label>
	        <input type="password" id="password" name="password" th:value="${signupForm.password}" th:errorclass="err"><br>
	        <!-- バリデーションエラーの表示 -->
	        <div th:if="${#fields.hasErrors('password')}" th:errors="${signupForm.password}" th:errorclass="err"></div>
	        
	        <!-- usersテーブルに email  gender  age  telのカラムを追加したので フォームの追加をします 4つ  email  gender  age  tel -->
	        <label for="email">メールアドレス</label>
	        <input type="email" id="email" name="email" th:value="${signupForm.email}" th:errorclass="err"><br>
	        <div th:if="${#fields.hasErrors('email')}" th:errors="${signupForm.email}" th:errorclass="err"></div>
	                
	        
	        <label for="gender">性別</label>
	  <!--  これでもいいけど  
	      <input th:each="element : ${genderMap}" type="radio" name="gender" th:value="${element.key}" th:text="${element.value}" th:field="*{gender}" th:checked="${element.key ==  signupForm.gender}" th:errorclass="err"/>
	    -->
	        <th:block th:each="element : ${genderMap}">
	        <input type="radio" name="gender" th:value="${element.key}" th:text="${element.value}" th:field="*{gender}" th:checked="${element.key ==  signupForm.gender}" th:errorclass="err"/>
	        </th:block>
	        <br />
	        <div th:if="${#fields.hasErrors('gender')}" th:errors="${signupForm.gender}" th:errorclass="err"></div>
	        
	        <label for="age">年齢</label>
	        <input type="text" id="age" name="age" th:value="${signupForm.age}" th:errorclass="err"><br>
	        <div th:if="${#fields.hasErrors('age')}" th:errors="${signupForm.age}" th:errorclass="err"></div>
	        
	        <label for="tel">電話番号</label>
	        <input type="text" id="tel" name="tel" th:value="${signupForm.tel}" th:errorclass="err"><br>
	        <div th:if="${#fields.hasErrors('tel')}" th:errors="${signupForm.tel}" th:errorclass="err"></div>
	        
	        <button type="submit">ユーザー登録</button>
	    </form>
    </div>
    
   <!--  自動ログインにした   ユーザー登録したあとは、自動でログインするように処理したので ログインボタンはいらないが、ログイン画面へ戻るために -->
    <div>
    	<a href="/login">ログイン画面へ戻る</a>
	</div>
</body>
</html>